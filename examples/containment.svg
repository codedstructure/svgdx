<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="85mm" height="121mm" viewBox="-15 -15 85 121">
  <style>
  <![CDATA[
    svg { background: none; }
    .d-surround { fill: none; }
    svg * { stroke-linecap: round; stroke-linejoin: round; }
    rect, circle, ellipse, polygon { stroke-width: 0.5; fill: white; stroke: black; }
    line, polyline, path { stroke-width: 0.5; fill: none; stroke: black; }
    text, tspan { stroke-width: 0; font-family: sans-serif; font-size: 3px; fill: black; paint-order: stroke; stroke: white; }
    .d-fill-grey { fill: grey; }
    text.d-fill-grey, text.d-fill-grey * { fill: white; stroke: black; }
    .d-fill-white { fill: white; }
    text.d-fill-white, text.d-fill-white * { fill: black; stroke: white; }
    .d-none { stroke: none; }
    text.d-text, text.d-text * { text-anchor: middle; dominant-baseline: central; }
    .d-dash { stroke-dasharray: 1 1.5; }
  ]]>
  </style>
  <rect x="-10" y="-10" width="75" height="111" class="d-fill-white d-surround"/>
  <rect id="o2" x="-8" y="-8" width="71" height="70" opacity="0.4" class="d-fill-grey d-surround"/>
  <rect id="o3" x="-3" y="-3" width="26" height="60" opacity="0.4" class="d-fill-grey d-dash d-surround"/>
  <rect id="o4" x="32" y="-3" width="26" height="44" opacity="0.4" class="d-fill-grey d-surround"/>
  <!-- TODO: would be nice to specify xy on o5, (e.g. xy="#o3:v 10") and have elements organise within -->
  <rect id="o5" x="14.5" y="65" width="48" height="34" opacity="0.4" class="d-fill-grey d-surround"/>

  <rect id="inp" width="20" height="8"/>
  <text x="10" y="4" class="d-text">input</text>
  <rect id="proc1" x="0" y="10" width="20" height="8"/>
  <text x="10" y="14" class="d-text">process 1</text>
  <rect id="proc2" x="0" y="20" width="20" height="16"/>
  <text x="10" y="28" class="d-text">process 2</text>
  <rect id="out" x="0" y="38" width="20" height="16"/>
  <text x="10" y="46" class="d-text">out</text>

  <rect id="xinp" x="35" y="0" width="20" height="8"/>
  <text x="45" y="4" class="d-text">input</text>
  <rect id="xproc1" x="35" y="10" width="20" height="8"/>
  <text x="45" y="14" class="d-text">process 1</text>
  <rect id="xproc2" x="35" y="20" width="20" height="8"/>
  <text x="45" y="24" class="d-text">process 2</text>
  <rect id="xout" x="35" y="30" width="20" height="8"/>
  <text x="45" y="34" class="d-text">out</text>

  <rect id="yinp" x="17.5" y="68" width="20" height="8"/>
  <text x="27.5" y="72" class="d-text">input</text>
  <rect id="yproc1" x="39.5" y="68" width="20" height="8"/>
  <text x="49.5" y="72" class="d-text">preprocess</text>
  <rect id="group" x="17.5" y="68" width="42" height="8" class="d-none d-surround"/>
  <!-- TODO: would be nice to be able to use '^:v' rather than #group:v -->
  <rect id="yproc2" x="17.5" y="78" width="42" height="8"/>
  <text x="38.5" y="82" class="d-text">process 2</text>
  <rect id="yout" x="17.5" y="88" width="42" height="8"/>
  <text x="38.5" y="92" class="d-text">out</text>

  <line x1="23" y1="19" x2="32" y2="19"/>
  <polyline points="20 46, 27.5 46, 27.5 68"/>
</svg>
