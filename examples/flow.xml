<svg>
  <var ps="10 5"/>
  <rect id="base" wh="40 20" class="d-fill-whitesmoke"/>
  <rect id="in" cxy="#base@l" wh="$ps" text="in" class="d-fill-green"/>
  <rect id="send" cxy="#base@t:30%" wh="$ps" text="send" class="d-fill-lightgrey"/>
  <rect id="return" cxy="#base@t:70%" wh="$ps" text="return" class="d-fill-grey"/>
  <rect id="out" cxy="#base@r" wh="$ps" text="out" class="d-fill-red"/>

  <rect id="effect" xy="#base|V 20" wh="20 8" text="effect" class="d-fill-darkmagenta"/>

  <line start="#send" end="#effect" class="d-arrow d-dash"/>
  <line start="#effect" end="#return" class="d-arrow d-dash"/>

  <polyline points="#in@l, #in@r, #send@b, #send@t, #effect@c, #return@t, #return@b, #out@l, #out@r"
            dxy="1 3" class="d-arrow d-hardshadow d-blue d-thin"/>

  <!-- TODO: get the following using refspec... -->
  <path d="M -4 13
  L 6 13
  C 13 13 13 13 13 5.5
  L 13 0.5
  C 13 -21 13 -21 21 -21
  C 29 -21 29 -21 29 0.5
  L 29 5.5
  C 29 13 29 13 36 13
  L 46 13
  " class="d-arrow d-hardshadow d-blue d-dot"/>
</svg>
